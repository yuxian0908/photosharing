angular.module("users",[]),angular.module("users").factory("Authentication",[function(){return this.user=window.user,{user:this.user}}]),angular.module("users").directive("ngFileSelect",["fileReader","$timeout",function(e,n){return{scope:{ngModel:"="},link:function(t,r){function i(r){e.readAsDataUrl(r,t).then(function(e){n(function(){t.ngModel=e})})}r.bind("change",function(e){i((e.srcElement||e.target).files[0])})}}}]),angular.module("users").factory("fileReader",["$q","$log",function(e,n){var t=function(e,n,t){return function(){t.$apply(function(){n.resolve(e.result)})}},r=function(e,n,t){return function(){t.$apply(function(){n.reject(e.result)})}},i=function(e,n){return function(e){n.$broadcast("fileProgress",{total:e.total,loaded:e.loaded})}},s=function(e,n){var s=new FileReader;return s.onload=t(s,e,n),s.onerror=r(s,e,n),s.onprogress=i(0,n),s};return{readAsDataUrl:function(n,t){var r=e.defer();return s(r,t).readAsDataURL(n),r.promise}}}]),angular.module("users").config(["$routeProvider","$locationProvider",function(e,n){e.when("/_admin",{templateUrl:"users/views/users.client.view.html"}).when("/_admin/signin",{templateUrl:"users/views/usersSignin.client.view.html"}).when("/_admin/signup",{templateUrl:"users/views/usersSignup.client.view.html"}).when("/_admin/signout",{templateUrl:"users/views/usersSignout.client.view.html"}).otherwise({redirectTo:"/"}),n.html5Mode(!0)}]),angular.module("users").controller("UsersController",["$scope","Authentication","$location","$routeParams","$http","fileReader",function(e,n,t,r,i,s){e.authentication=n,e.signin=function(){var n={username:this.username,password:this.password};i.post("api/_admin/signin",n).then(function(e){window.location.reload("/_admin"),t.path("/_admin")},function(n){e.error=errorResponse.data.message})},e.signout=function(){var n={firstname:this.firstname,lastname:this.lastname,email:this.email,username:this.username,password:this.password};i.post("api/_admin/signout",n).then(function(e){window.location.reload("/_admin"),t.path("/_admin")},function(n){e.error=errorResponse.data.message})},e.signup=function(){var n={firstname:this.firstname,lastname:this.lastname,email:this.email,username:this.username,password:this.password};i.post("api/_admin/signup",n).then(function(e){window.location.reload("/_admin"),t.path("/_admin")},function(n){e.error=errorResponse.data.message})},console.log(s),e.imageSrc="",e.$on("fileProgress",function(n,t){e.progress=t.loaded/t.total})}]);